syntax = "proto3";

option cc_generic_services=false;

package vivo.commonproxy;

message CommonInfo {
  string protofile_path = 1;  // 这里可以改为指定多个查找目录，当前一个目录符合需求
  string protofile = 2;
  string locator_ip = 3;
  string locator_port = 4;
  string service_name = 5;
  string ipport_assign = 6;
  //TODO 支持其它数据类型(当前默认pb)
  //TODO 支持添加超时设置(当前给默认值)
}

message QueryJson {
  string json_data = 1;
  string query_msg_name = 2;
  string answer_msg_name = 3;
  string rpc_func_name = 4;
}

message NormalReq {
  CommonInfo common_info = 1;
  QueryJson query_json = 2;
}

message RespData {
  string answer_json = 1;
}

message MsgInfo {
  string protofile_path = 1;
  string protofile = 2;
  string msg_name = 3;
}

message MsgDefault {
  string msg_default = 1;
}

service ProxyService {
  rpc getDefalut(MsgInfo) returns (MsgDefault);
  rpc getResp(NormalReq) returns (RespData);
}
